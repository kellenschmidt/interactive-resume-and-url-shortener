<div class="table-container mat-elevation-z3 container p-0">

  <div class="table-header">
    <md-input-container>
      <input mdInput #filter placeholder="Filter by long URL or short URL code">
    </md-input-container>
  </div>

  <md-table #table [dataSource]="dataSource" mdSort>

    <ng-container cdkColumnDef="long_url">
      <md-header-cell *cdkHeaderCellDef md-sort-header>Long URL</md-header-cell>
      <md-cell *cdkCellDef="let row" class="long-url">
        <a href="{{row.long_url}}" target="_blank" rel="noopener">{{row.long_url}}</a>
      </md-cell>
    </ng-container>

    <ng-container cdkColumnDef="date_created" id="date-column">
      <md-header-cell *cdkHeaderCellDef md-sort-header>Date Created</md-header-cell>
      <md-cell *cdkCellDef="let row"> {{formatDate(row.date_created) | date:'mediumDate'}} </md-cell>
    </ng-container>

    <ng-container cdkColumnDef="code">
      <md-header-cell *cdkHeaderCellDef md-sort-header>
        <span class="d-none d-md-inline-block">Short&nbsp;</span>URL<span class="d-inline-block d-md-none">&nbsp;code</span>
      </md-header-cell>
      <md-cell *cdkCellDef="let row">
        <a routerLink="/{{row.code}}" target="_blank" rel="noopener"><span class="d-none d-md-inline-block">kellenschmidt.com/</span>{{row.code}}</a>
        <a class="copy-btn" (click)="this.copy(row.code)" mdTooltip="Copy short URL"><i class="fa fa-clone"></i></a>
      </md-cell>
    </ng-container>

    <ng-container cdkColumnDef="count">
      <md-header-cell *cdkHeaderCellDef md-sort-header>Count</md-header-cell>
      <md-cell *cdkCellDef="let row" class="justify-content-between">
        {{row.count}}
        <a md-icon-button [mdMenuTriggerFor]="menu" class="menu-btn">
          <i class="fa fa-ellipsis-v"></i>
        </a>
        <md-menu #menu="mdMenu">
          <button md-menu-item (click)="hideLink(row.code)">
            <span>Hide URL</span>
            <i class="fa fa-eye-slash ml-2"></i>
          </button>
        </md-menu>
      </md-cell>
    </ng-container>

    <md-header-row *cdkHeaderRowDef="displayedColumns"></md-header-row>
    <md-row *cdkRowDef="let row; columns: displayedColumns;"></md-row>
  </md-table>

  <div id="table-loading-spinner" *ngIf="!tableHandler.tableLoaded" class="mx-auto">
    <md-progress-spinner
      class="my-5"
      [color]="spinnerSettings.color"
      [mode]="spinnerSettings.mode">
    </md-progress-spinner>
  </div>

  <div id="no-links-placeholder" *ngIf="(tableHandler.data.length == 0 && tableHandler.tableLoaded)" class="text-center pt-5">
    <img src="https://res.cloudinary.com/kellenscloud/image/upload/c_scale,f_auto,q_auto,w_400/no-links-placeholder2.png" class="pb-3" height="170">
    <p class="pb-4">You haven't created any links yet. Try creating a new link above.</p>
  </div>

  <md-paginator #paginator
                [length]="tableDatabase.data.length"
                [pageIndex]="0"
                [pageSize]="7"
                [pageSizeOptions]="[5, 10, 25, 100]">
  </md-paginator>
</div>